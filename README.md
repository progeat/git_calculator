# Модуль Git

Финальное практическое задание учебного модуля git. Служит для проработки теоретических знаний на практике полученных при прохождении данного модуля.

## Опиcание задания

Дан [архив](https://fs04.gcfiles.net/fileservice/file/download/a/177331/sc/118/h/71004dadb28a51141cbd7a59c03e2129.zip) с приложением «Калькулятор». Внутри него инициализирован git-репозиторий без привязки к удаленному репозиторию, требуется навести в нем порядок.

## Команды Git

Используемые комманды Git при выполнении учебного задания

- `git status`: Для проверки текущего состояния репозитория.
- `git log`: Для просмотра истории коммитов.
- `git checkout`: Для переключения навигации по веткам.
- `git checkout -b`: Для создания ветки и перехода на неё.
- `git commit --amend`: Для редактирования последнего коммита.
- `git add .`: Для добавления изменений в индекс(staging).
- `git commit -m "message commit"`: Для сохранения изменений в локальном репозитории.
- `git stash`: Для временного сохранения изменений в репозитории в определенную область гита(stash).
- `git stash pop`: Для изъятия последнего добавленного в stash изменения.
- `git rebase`: Для переноса изменения из одной ветки в другую.
- `git rebase -i HEAD~N`: Для интерактивного редактирования коммитов ветки, где N - это число коммитов попадающего для редактирования.
- `git merge`: Для объединения изменений веток.
- `git cherry-pick`: Для применения изменения коммита из одной ветки в другой.
- `git apply`: Для применения патча.

## Выполнение учебного задания

Подробное описание каждого учебного задания, которое было выполнено. Включает принятые решения, их обоснование и реализацию.

**Требования:**

1.  Все имена коммитов должны соответствовать спецификации «Conventional Commits». Если потребуется, то раздробить коммит на несколько логически связанных частей (или наоборот склеить). Например, чтобы в одном коммите не было и рефакторинга, и добавления нового функционала.
2.  Все вливаемые ветки должны начинаться от актуального состояния целевой ветки (делать _git rebase_).
3.  Все коммиты во вливаемой ветке должны следовать друг за другом (история вливаемой ветки должна быть линейной, без дополнительных ответвлений).
4.  Не должно быть merge-коммитов.
5.  Все _feature_ и _fix_ ветки должны вливаться в _develop_.
6.  В _main_ должен быть один merge только из _develop_.
7.  По желанию можно любым образом дорабатывать и улучшать приложение.

### Задача #1

**Суть задачи**: Пройти все задания в песочнице LearnGitBranching.

**Принятое решение**: Использовал песочницу LearnGitBranching для изучения основ Git и работы с удаленными репозиториями.

**Реализация**: Скриншоты пройденных уровней были сохранены и прикреплены к отчету([Основы](https://disk.yandex.ru/i/XNGTboXopemp8Q), [Удаленные репозитории](https://disk.yandex.ru/i/H6Iul-GchBklsQ)).

### Задача #2

Сокращенные обозначения коммитов:

- A — «install ant design»
- B — «add support alias path»

**Суть задачи**:

1.  Из коммита **А** извлечь изменение с установкой _"@types/node": "20.1.3"_ и перенести его в коммит **B** (с помощью интерактивного rebase).
2.  Коммит **B** переместить при помощи _git cherry-pick_ в ветку _development_.
3.  Обновить ветку _feature/add-ant-design_ по _development_ (с помощью _git rebase_).
4.  Влить ветку _feature/add-ant-design_ в _development_.

**Принятое решение**:

- Перед решением данной задачи, по требованию пункта #_1_ к учебному заданию, произвёл переименование коммита по спецификации «[Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/)». В ветке _development_ переименовал коммит `fix package.json` на `build: package.json` применив команду `git commit --amend`. Тип `build` использовал так как это первоначальная сборка/настройка проекта.

---

#### Задача 2.1

На ветке `feature/add-ant-design` выполнил команду интерактивного `rebase` с выбором последних 3-ех коммитов:

**Реализация**:

```bash
# Интерактивный rebase
git rebase -i HEAD~3
```

В открывшемся интерактивном редакторе выставил команды:

> edit # install
> edit # add support alias path
> reword # add antd theme

-- где `#` это хэш коммита

--- В интерактивном режиме редактирования коммита **A** исправил файл `package.json`(удалил зависимость с установкой пакета `"antd":  "^5.4.7"`)

--- Добавил изменения в `staging` с помощью команды `git add .`

--- Изменения сохранил в `stash` командой `git stash`(чтобы в дальнейшем применить их в коммите **B**)

--- Удалил зависимость в файле `package.json` с установкой пакета `@types/node": "20.1.3`, добавил изменения в `staging` командой `git add .`

--- Применил команду `git commit --amend` и переименовал сообщение коммита на `feat: install ant design`

--- Далее для перехода к интерактивному редактированию следующего коммита ввёл команду `git rebase --continue`

**Реализация**:

```bash
# Добавляет изменение файла package.json
# в staging
git add .

# Перемещает изменение из staging в stash
# и последующая отмена изменений, которые
# попали в staging
git stash

# Повторяем комманду добавления изменений
# файла package.json для коммита A
git add .

# Переименновывает сообщение коммита
git commit --amend

# Переходит к следующему коммиту
git rebase --continue
```

--- В коммите **B** выполнил команду `git stash pop` для изъятия изменений из `stash`

--- Изменения добавил в `staging` коммандой `git add .`

--- Воспользовался командой `git commit --amend` и переименовал коммит на `chore: add support alias path`

--- Далее для перехода к интерактивному редактированию следующего коммита ввёл команду `git rebase --continue`

**Реализация**:

```bash
# Изымает изменение из stash
git stash pop

# Добавляет изменение в staging
git add .

# Переименновывает сообщение коммита
git commit --amend

# Переходит к следующему коммиту
git rebase --continue
```

--- В открывшемся интерактивном редакторе следуещего коммита `add antd theme` переименовал в `feat: add antd theme`

---

#### Задача 2.2

В ветке _development_ выполнил команду `git cherry-pick #`, где `#` это хэш коммита **B** для копирования коммита в ветку `development` из ветки `feature/add-ant-design`.

**Реализация**:

```bash
# Копирует коммит 'B' в ветку
git cherry-pick B
```

---

#### Задача 2.3

В ветке _feature/add-ant-design_ выполнил обновление по ветке `development` с помощью интерактивного `rebase` так как нужно было удалить не нужный коммит **B** и родительский коммит `fix package.json`

**Реализация**:

```bash
# Интерактивный rebase
git rebase -i development
```

В открывшемся интерактивном редакторе выставил команды:

> drop # fix package.json
> pick # feat: install ant design
> drop # chore: add support alias path
> pick # feat: add antd theme

-- где `#` это хэш коммита

---

#### Задача 2.4

В ветке _development_ выполнил комманду слияния `merge` с веткой `feature/add-ant-design`

**Реализация**:

```bash
# Сливает передаваемую ветку в команде
# с текущей
git merge feature/add-ant-design
```

### Задача #3

**Суть задачи**: Слияние оставшихся веток в ветку `development`, предварительно обновив их с помощью `rebase`.

**Принятое решение**: Применил `rebase` перед каждым слиянием, чтобы история изменений оставалась линейной. Перед слиянием в каждой ветке выполнял интерактивный `rebase` для переименования сообщений коммитов и слияния некоторых коммитов в один, которые имели схожую суть.

**Реализация**:

```bash
# Обновление ветки feature/core
git rebase development

# Выполнение в ветке development
git merge feature/core

# Аналогично для остальных веток
```

### Задача #4

**Суть задачи**: Применение патчей к приложению.

**Принятое решение**: Создал отдельную ветку `patches` от ветки `development` с помощью команды `git checkout -b patches`. Создал папку `patches` в корне проекта и перенёс файлы патчей в эту папку. Использовал команду `git apply` для применения патчей, так как применение команды `git am` вызывало конфликт. Добавлял в `staging` изменения при каждом применении патча, как и файл патча, так и изменение при применении патча. Выполнял команду `git commit --amend` для переименования сообщения коммитов патчей. Далее произвёл слияние ветки с веткой `development`.

**Реализация**:

```bash
# Применение N патча
git apply ./patches/patch_N.diff

# Добавляет изменение в staging
git add .

# Переименовывает коммит после применения патча
git commit --amend

# Аналогично для остальных патчей

# Выполнение слияния ветки patches
git merge patches
```

### Задача #5

**Суть задачи**: Создание репозитория на GitHub и выпуск релиза приложения согласно спецификации SemVer.

**Принятое решение**: Выполнил слияние ветки `development` и ветки `main` с помощью команды `git merge development --allow-unrelated-histories`, так как у данных веток нет общего родительского коммита. Создал тег с версионностью с привязкой к коммиту слияния. Создал новый репозиторий на GitHub, загрузил туда локальный репозиторий и выпустить релиз с использованием тегов и спецификации SemVer.

**Реализация**:

```bash
# Слияние ветки development и main
git merge development --allow-unrelated-histories

# Привязка локального репозитория к удаленному
git remote add origin git@github.com:progeat/git_calculator.git

# Выгрузка локального репозитория на удаленный
git push -u origin main

# Создание и отправка тега на удаленный репозиторий
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0
```

## Ссылки

- Спецификация имён коммитов [ConventialCommits](https://www.conventionalcommits.org/en/v1.0.0/)
- Семантическое версионирование [SemVer](https://semver.org/)

## Авторы

- taraswww777 <[taraswww777@mail.ru](mailto:taraswww777@mail.ru)> — разработка.
- Хохлов Андрей — исправление ошибок.

## Лицензия

Этот проект распространяется под лицензией MIT License.
